<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Mapper Graph Viewer</title>
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <style>
  
    body {
        margin: 0;
        display: flex;
        flex-direction: column;   /* topbar at top, main under it */
        height: 100vh;
        background: #0b1220; /*#111;*/
        color: #ddd;
        font-family: sans-serif;
    }

    /* TOP BAR */
    #topbar {
        width: 100%;
        background: #0d1624;
        padding: 10px;
        box-sizing: border-box;
        border-bottom: 2px solid #1a2a45;
        display: flex;
        gap: 10px;
        flex-shrink: 0;   
    }

    #topbar button {
        padding: 6px 12px;
        background: #1d3b63;
        border: 1px solid #294c80;
        border-radius: 5px;
        color: #eee;
        cursor: pointer;
        font-size: 13px;
    }

    #topbar button:hover {
        background: #275086;
    }

    /* MAIN CONTENT LAYOUT */
    #main {
        display: flex;
        flex-direction: row;
        flex-grow: 1;
        height: calc(100% - 60px); 
    }

    /* SIDEBAR */
    #sidebar {
        width: 260px;        
        background: #0f1a2b;
        padding: 20px;
        box-sizing: border-box;
        border-right: 2px solid #1a2a45;
        overflow-y: auto;
        flex-shrink: 0;           
    }

    /* Graph area takes remaining space */
    #graph {
        flex-grow: 1;
        position: relative;
    }

    /* Panels */
    .panel {
        background: #112035;
        padding: 15px;
        margin-bottom: 20px;
        border-radius: 8px;
    }

    .panel h3 {
        margin-top: 0;
        margin-bottom: 10px;
        font-size: 15px;
        color: #7bb3ff;
    }


  </style>
</head>

<body>

    <div id="topbar">
        <button id="togglePie">Show Pie Charts</button>
        <button id="toggleLabels">Show Labels</button>

        <select id="colorMode" style="padding:6px;">
        <option value="class">Color by Dominant State</option>
        <option value="confirmed">Color by Avg Confirmed Cases</option>
    </select>
    </div>

    <div id="main">
        <div id="sidebar">
            <div id="graphInfo" class="panel">
                <h3>GRAPH</h3>
                <p>Nodes: <span id="infoNodes">–</span></p>
                <p>Links: <span id="infoLinks">–</span></p>
                <p>Classes: <span id="infoClasses">–</span></p>
            </div>

            <div id="nodeInfo" class="panel">
                <h3>SELECTED NODE</h3>
                <p><b>Node:</b> <span id="infoNodeId">–</span></p>
                <p><b>Avg recorded days:</b> <span id="infoNodeSize">–</span></p>
                <p><b>Purity:</b> <span id="infoNodePurity">–</span></p>
                <p><b>Misrate:</b> <span id="infoNodeMisrate">–</span></p>
                <p><b>Avg Confirmed:</b> <span id="infoNodeConfirmed">–</span></p>
                <div id="infoNodeCounts"></div>
            </div>
        </div>

        <div id="graph"></div>
    </div>

    <script src="viewer.js"></script>
</body>


</html>
